(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1980],{83686:()=>{},32383:()=>{},49994:(e,t,r)=>{Promise.resolve().then(r.bind(r,2017))},65068:(e,t,r)=>{"use strict";r.d(t,{A:()=>M});var l=r(95155),i=r(48173),s=r.n(i),a=r(75436),n=r(4918),o=r(41983),d=r(36017),c=r(2091),u=r(60391);let h=e=>{let{page:t}=e;return(0,l.jsx)(a.default,{children:(0,l.jsx)(n.A,{children:t.map(e=>(0,l.jsx)(o.Ay,{disablePadding:!0,children:(0,l.jsxs)(d.A,{LinkComponent:s(),href:e.url,onClick:e.onClick,children:[(0,l.jsx)(c.A,{children:e.icon}),(0,l.jsx)(u.A,{primaryTypographyProps:{fontSize:15,fontWeight:"medium",letterSpacing:0},children:e.title})]})},e.title))})})};var x=r(78897),f=r.n(x),A=r(12115),m=r(79046),p=r.n(m),j=r(2138),g=r(70689),S=r(96212),C=r(85067),O=r(85244),E=r(74676),N=r(92080),D=r(6069),w=r(9581),I=r(43677),T=r(20457),b=r(11451),P=r(46805),k=r(894),v=r(2295),R=r(9561),y=r(81894),_=r(91888);let M=()=>{let{auth:e,logout:t}=(0,g.A)(),[r,i]=(0,A.useState)(null),[n,o]=(0,A.useState)(!1),d=()=>{o(!1),i(null)},c=[{title:"USUARIOS ",url:"/start/usuarios/",icon:(0,l.jsx)(E.A,{})},{title:"PEDIDOS",url:"/start/pedidos/",icon:(0,l.jsx)(N.A,{})},{title:"CLIENTES",url:"/start/clients/",icon:(0,l.jsx)(S.A,{})},{title:"PRODUCTOS",icon:(0,l.jsx)(D.A,{}),onClick:e=>{o(!0),i(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas/",icon:(0,l.jsx)(w.A,{})},{title:"CAJA",url:"/start/pedidos/pedidosCaja/",icon:(0,l.jsx)(I.A,{})}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.default,{}),(0,l.jsxs)(a.default,{sx:{flexGrow:1},children:[(0,l.jsx)(b.A,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,l.jsxs)(P.A,{children:[(0,l.jsx)(k.A,{color:"inherit",onClick:e=>{i(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,l.jsx)(O.A,{})}),(0,l.jsx)(a.default,{sx:{display:{xs:"none",md:"flex"}},children:c.map(e=>(0,l.jsx)(v.default,{sx:{fontSize:"15px"},color:"inherit",size:"large",LinkComponent:s(),href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,l.jsx)(R.default,{variant:"h6",sx:{flexGrow:1}}),(0,l.jsx)(v.default,{component:s(),href:"/start",color:"inherit",children:(0,l.jsx)(j.A,{})}),(0,l.jsxs)(v.default,{className:p().className,color:"inherit",sx:{fontSize:"15px"},children:[(0,l.jsx)(S.A,{}),e&&e.PER_Nom]}),(0,l.jsx)(v.default,{color:"inherit",onClick:()=>{f().fire({title:"\xbfQuieres terminar la Sesi\xf3n?",icon:"question",showCancelButton:!0,confirmButtonColor:"#09ff00",cancelButtonColor:"#fa0000",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&t()})},children:(0,l.jsx)(C.A,{})})]})}),(0,l.jsxs)(y.A,{id:"basic-menu",anchorEl:r,open:n,onClose:d,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,l.jsx)(_.A,{onClick:d,component:s(),href:"/start/buscarProd/",children:"Buscar Por Referencias"}),(0,l.jsx)(_.A,{onClick:d,component:s(),href:"/start/productosMG/",children:"Lista de Todos Los Productos"})]}),(0,l.jsx)(y.A,{id:"basic-menu",anchorEl:r,MenuListProps:{"aria-labelledby":"basic-button"},open:!!r,onClose:()=>{i(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,l.jsx)(h,{page:c})})]})]})}},76134:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var l=r(95155),i=r(7660),s=r(12115),a=r(2295);let n=e=>{let{datos:t}=e,[r,n]=(0,s.useState)(!1);return(0,l.jsx)(a.default,{variant:"outlined",color:"success",onClick:()=>{if(!Array.isArray(t)||0===t.length){console.error("Datos no est\xe1n en el formato correcto o est\xe1n vac\xedos.");return}n(!0);try{let e=i.Wp.book_new(),r=i.Wp.json_to_sheet(t);i.Wp.book_append_sheet(e,r,"Datos"),i._h(e,"datos.xlsx")}catch(e){console.error("Error al generar el archivo Excel",e)}finally{n(!1)}},disabled:r,children:r?"Loading...":"Excel"})}},2017:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var l=r(95155),i=r(48173),s=r.n(i),a=r(8889),n=r(39241),o=r(76046),d=r(70689),c=r(65068),u=r(76134),h=r(71014),x=r(49359),f=r(12115),A=r(9561),m=r(86898),p=r(75436),j=r(54255),g=r(2295),S=r(70152);let C=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),O=[{field:"FECHA_PEDIDO",headerName:"FECHA",width:150,renderCell:e=>C(e.value)},{field:"PEDIDO",headerName:"PEDIDO",width:160},{field:"ESTADO",headerName:"ESTADO",width:100},{field:"IMPRESO",headerName:"IMP",width:80},{field:"AUTORIZADONOM",headerName:"AUTORIZADO",width:150,renderCell:e=>{let t=e.row.AUTORIZADONOM;return(0,l.jsx)(A.default,{style:{color:"APROBADO"===t?"#00FC00":"RETENIDO"===t?"#FF1507":"#000000",backgroundColor:"transparent"},children:t})}},{field:"U_COMPESPECIAL",headerName:"ESPECIAL",width:100},{field:"VENDEDOR",headerName:"VEND",width:100},{field:"COMENTARIO_CXC",headerName:"AUT. SISTEMA",width:250},{field:"TOTAL_A_FACTURAR",headerName:"A FACT",width:120,valueFormart:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())}},{field:"NOMBRE_RAZON",headerName:"CLIENTE",width:400},{field:"U_EDITADOPOR",headerName:"USUARIO MG",width:120},{field:"DEPTO",headerName:"DEPARTAMENTO",width:160},{field:"CIUDAD",headerName:"CIUDAD",width:200}],E=()=>{let e=(0,o.useRouter)(),{setPedido:t}=(0,d.A)(),[r,i]=(0,f.useState)([]),[A,C]=(0,f.useState)(!0),[E,N]=(0,f.useState)(),[D,w]=(0,f.useState)([]),[I,T]=(0,f.useState)(),b=(0,m.A)("(max-width: 600px)");(0,f.useEffect)(()=>{(async()=>{try{let e=await fetch(a.c.url+"/pedidos/listar",{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();C(!1),T(t),N(t)}catch(e){console.log(e)}})()},[]);let P=e=>{T(E.filter(t=>Object.values(t).map(e=>e?e.toString().toLowerCase():"").some(t=>t.includes(e))))},k=(0,f.useCallback)(r=>{if(w(r),r.length>0){let l=E.filter(e=>{let t=e.PEDIDO;return!!t&&t.toString().includes(r[0])});localStorage.setItem("pedidoTemp",JSON.stringify(l)),t(l),e.push("/start/pedidos/pedidosC")}},[I]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.default,{children:[" "," ",(0,l.jsx)(c.A,{})," "," "]}),(0,l.jsx)("div",{className:"container",children:!0===A?(0,l.jsx)(p.default,{sx:{width:"100%"},children:(0,l.jsx)(j.A,{})}):(0,l.jsx)(p.default,{children:(0,l.jsxs)(n.A,{container:!0,direction:"column",sx:{minHeight:"90vh",backgroundColor:"#ffffff",padding:2},children:[(0,l.jsxs)(p.default,{sx:{display:"flex",flexDirection:b?"column":"row",alignItems:"center",gap:2,marginBottom:2},children:[(0,l.jsx)(n.A,{size:{xs:12,sm:8,md:6},children:(0,l.jsx)("h2",{children:(0,l.jsx)("strong",{children:"PEDIDOS"})})}),(0,l.jsx)(n.A,{size:{sx:6},children:(0,l.jsxs)(g.default,{variant:"outlined",sx:{margin:"10px"},LinkComponent:s(),href:"./crearPedido",children:[" ","Nuevo"," "]})}),(0,l.jsx)(n.A,{size:{sx:6},children:(0,l.jsx)(u.A,{datos:I})}),(0,l.jsx)(n.A,{size:{xs:12,sm:8,md:6},children:(0,l.jsx)(S.A,{id:"outlined-basic",placeholder:"Buscar...",multiline:!0,rows:1,variant:"outlined",value:r,onChange:e=>{i(e.target.value),P(e.target.value)},sx:{width:"100%"}})})]}),(0,l.jsx)(n.A,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,l.jsx)(p.default,{sx:{width:"100%",height:b?500:810},children:(0,l.jsx)(h.z,{rows:I,columns:O,initialState:{pagination:{paginationModel:{page:0,pageSize:12}}},pageSizeOptions:[12],onRowSelectionModelChange:k,slots:{toolbar:x.O},rowSelectionModel:D,getRowId:e=>e.PEDIDO,sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})})]})})})]})}},8889:(e,t,r)=>{"use strict";r.d(t,{c:()=>l,m:()=>i});let l={url:"http://172.20.20.3:8001"},i={url:"http://192.168.1.3:3010/api"}},70689:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>o});var l=r(95155),i=r(12115),s=r(76046),a=r(89208);let n=(0,i.createContext)({login:e=>{},logout:()=>{}}),o=e=>{let{children:t}=e,r=(0,s.useRouter)(),[o]=(0,i.useState)(!0),[d,c]=(0,i.useState)(null),[u,h]=(0,i.useState)({}),[x,f]=(0,i.useState)({}),[A,m]=(0,i.useState)({}),p=(0,i.useCallback)(function(e){a.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),c(e)},[]),j=(0,i.useCallback)(function(){r.push("/"),a.A.remove("authTokens"),localStorage.removeItem("auth"),c(null)},[]);(0,i.useEffect)(()=>{let e=localStorage.getItem("auth")||a.A.get("authTokens"),t=localStorage.getItem("pedido"),r=localStorage.getItem("caja"),l=localStorage.getItem("cliente");l&&h(JSON.parse(l)),t&&f(JSON.parse(t)),r&&m(JSON.parse(r)),e&&c(JSON.parse(e))},[]);let g=(0,i.useMemo)(()=>({auth:d,cliente:u,setCliente:h,pedido:x,setPedido:f,caja:A,setCaja:m,loading:o,login:p,logout:j}),[d,u,x,A,p,j]);return(0,l.jsx)(n.Provider,{value:g,children:t})},d=()=>(0,i.useContext)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[339,8320,3524,9754,1083,1260,6403,152,8173,2670,7493,1669,1014,6006,8441,1517,7358],()=>t(49994)),_N_E=e.O()}]);