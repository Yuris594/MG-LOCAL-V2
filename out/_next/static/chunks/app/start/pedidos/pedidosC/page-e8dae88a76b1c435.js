(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2842],{21678:(e,t,l)=>{Promise.resolve().then(l.bind(l,87300))},65068:(e,t,l)=>{"use strict";l.d(t,{A:()=>F});var a=l(95155),i=l(48173),n=l.n(i),s=l(75436),o=l(4918),r=l(41983),d=l(36017),c=l(2091),u=l(60391);let _=e=>{let{page:t}=e;return(0,a.jsx)(s.default,{children:(0,a.jsx)(o.A,{children:t.map(e=>(0,a.jsx)(r.Ay,{disablePadding:!0,children:(0,a.jsxs)(d.A,{LinkComponent:n(),href:e.url,onClick:e.onClick,children:[(0,a.jsx)(c.A,{children:e.icon}),(0,a.jsx)(u.A,{primaryTypographyProps:{fontSize:15,fontWeight:"medium",letterSpacing:0},children:e.title})]})},e.title))})})};var x=l(78897),h=l.n(x),f=l(12115),A=l(79046),p=l.n(A),m=l(2138),C=l(70689),j=l(96212),O=l(85067),E=l(85244),g=l(74676),S=l(92080),I=l(6069),D=l(9581),b=l(43677),R=l(20457),P=l(11451),N=l(46805),T=l(894),v=l(2295),w=l(9561),y=l(81894),L=l(91888);let F=()=>{let{auth:e,logout:t}=(0,C.A)(),[l,i]=(0,f.useState)(null),[o,r]=(0,f.useState)(!1),d=()=>{r(!1),i(null)},c=[{title:"USUARIOS ",url:"/start/usuarios/",icon:(0,a.jsx)(g.A,{})},{title:"PEDIDOS",url:"/start/pedidos/",icon:(0,a.jsx)(S.A,{})},{title:"CLIENTES",url:"/start/clients/",icon:(0,a.jsx)(j.A,{})},{title:"PRODUCTOS",icon:(0,a.jsx)(I.A,{}),onClick:e=>{r(!0),i(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas/",icon:(0,a.jsx)(D.A,{})},{title:"CAJA",url:"/start/pedidos/pedidosCaja/",icon:(0,a.jsx)(b.A,{})}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.default,{}),(0,a.jsxs)(s.default,{sx:{flexGrow:1},children:[(0,a.jsx)(P.A,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,a.jsxs)(N.A,{children:[(0,a.jsx)(T.A,{color:"inherit",onClick:e=>{i(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,a.jsx)(E.A,{})}),(0,a.jsx)(s.default,{sx:{display:{xs:"none",md:"flex"}},children:c.map(e=>(0,a.jsx)(v.default,{sx:{fontSize:"15px"},color:"inherit",size:"large",LinkComponent:n(),href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,a.jsx)(w.default,{variant:"h6",sx:{flexGrow:1}}),(0,a.jsx)(v.default,{component:n(),href:"/start",color:"inherit",children:(0,a.jsx)(m.A,{})}),(0,a.jsxs)(v.default,{className:p().className,color:"inherit",sx:{fontSize:"15px"},children:[(0,a.jsx)(j.A,{}),e&&e.PER_Nom]}),(0,a.jsx)(v.default,{color:"inherit",onClick:()=>{h().fire({title:"\xbfQuieres terminar la Sesi\xf3n?",icon:"question",showCancelButton:!0,confirmButtonColor:"#09ff00",cancelButtonColor:"#fa0000",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&t()})},children:(0,a.jsx)(O.A,{})})]})}),(0,a.jsxs)(y.A,{id:"basic-menu",anchorEl:l,open:o,onClose:d,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,a.jsx)(L.A,{onClick:d,component:n(),href:"/start/buscarProd/",children:"Buscar Por Referencias"}),(0,a.jsx)(L.A,{onClick:d,component:n(),href:"/start/productosMG/",children:"Lista de Todos Los Productos"})]}),(0,a.jsx)(y.A,{id:"basic-menu",anchorEl:l,MenuListProps:{"aria-labelledby":"basic-button"},open:!!l,onClose:()=>{i(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,a.jsx)(_,{page:c})})]})]})}},11434:(e,t,l)=>{"use strict";l.d(t,{m:()=>i});var a=l(12115);let i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,l]=(0,a.useState)(e);return{form:t,changed:e=>{let{name:a,value:i}=e.target;l({...t,[a]:i})},setForm:l}}},87300:(e,t,l)=>{"use strict";l.r(t),l.d(t,{PedidosC:()=>B,default:()=>V});var a=l(95155),i=l(12115),n=l(81996),s=l.n(n),o=l(8889),r=l(39241),d=l(76046),c=l(11434),u=l(77097),_=l(70689),x=l(73440),h=l(65068);l(92340);var f=l(10142),A=l(6171),p=l.n(A),m=l(89100);let C=e=>{{let t=document.createElement("canvas");return p()(t,e,{format:"CODE128"}),t.toDataURL("image/png")}},j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},[a]=(0,i.useState)((0,m.GP)(new Date,"dd/MM/yyyy HH:mm:ss")),n=C(null==e?void 0:e.PEDIDO);return{generarPDF:()=>{let i=new f.default("portrait","pt","letter"),s=[{field:"ARTICULO",headerName:"CODIGO",width:200},{field:"DESCRIPCION",headerName:"REFERENCIA",width:500},{field:"PRECIO",headerName:"PRECIO",width:200},{field:"CPed",headerName:"CANT",width:200,type:"number"},{field:"DESP",headerName:"DESP",width:250,type:"number"},{field:"EMPA",headerName:"EMPA",width:200,type:"number"}],o=t.map(e=>{let t=[];return s.forEach(l=>{let a=e[l.field];"PRECIO"===l.field&&(a=parseFloat(Number(a).toFixed(0)).toLocaleString()),t.push(a)}),t});i.setFontSize(20),i.addImage("".concat(n),220,10,130,60),i.setFont("helvetica","italic"),i.setFontSize(13),i.text("PREFACTURA",12,30),"S"===e.IMPRESO&&i.text("DUPLICADO",12,55),i.setFontSize(13),i.text("FACTURA N\xb0________",450,30),i.setFontSize(9),i.text(" ".concat(e.FECHA_PEDIDO),500,65),i.setFontSize(13),i.text("FECHA",450,65),i.text("________________________________________________________________________________",12,70),i.setFontSize(9),i.text("CLIENTE:    ".concat(e.NOMBRE_RAZON),12,85),i.text("NIT/CEDULA:    ".concat(e.CLIENTE),12,98),i.text("DOC2:    ".concat(e.PEDIDO),340,98),i.text("PEORI:    ".concat(e.PEDIDO),450,98),i.text("CIUDAD PPAL:    ".concat(e.CIUDAD,"-").concat(e.DEPTO),12,112),i.text("TEL:    ".concat(e.PEDIDO),340,112),i.text("D'UNA:    ".concat(e.PEDIDO),450,112),i.text("DIRECCION Y CIUDAD DE DESPACHO:    ".concat(e.PEDIDO),12,125),i.text("SOLICITA:   ".concat(e.PEDIDO),340,125),i.autoTable({head:[s.map(e=>e.headerName)],body:o,styles:{theme:"plain",tableWidth:"auto",lineColor:[200,200,200],lineWight:.1,font:"times",fontStyle:"normal",textColor:[0,0,0],display:"flex",cellWidth:"auto",fontSize:8},startY:150,theme:"plain",columnStyles:{cellWidth:"auto"}}),i.setFontSize(10),i.text("TOTAL ITEMS: ".concat(t.length),350,i.autoTable.previous.finalY+20),i.text("Total: ".concat(l),470,i.autoTable.previous.finalY+20),i.text("SEPARADO POR _____________________________________",12,i.autoTable.previous.finalY+20),i.text("REVISADO POR ______________________________________",12,i.autoTable.previous.finalY+40),i.text("DESPACHADO POR ______________________",350,i.autoTable.previous.finalY+40),i.setFontSize(8),i.text("VENDEDOR: ".concat(e.VENDEDOR),12,i.autoTable.previous.finalY+65),i.text("MODIFICADO POR: ".concat(e.U_EDITADOPOR),350,i.autoTable.previous.finalY+65),i.text("AUTORIZADO EN CARTERA POR: ".concat(e.VENDEDOR),12,i.autoTable.previous.finalY+80),i.text("FECHA AUTORIZADO: ".concat(e.U_EDITADOPOR),350,i.autoTable.previous.finalY+80),i.text("________________________________________________________________________________________",12,i.autoTable.previous.finalY+90),i.text("".concat(a),12,i.autoTable.previous.finalY+103),i.output("dataurlnewwindow")}}};var O=l(95156);let E=(e,t,l)=>{let[a,n]=(0,i.useState)(0),[s,o]=(0,i.useState)(0);return(0,i.useEffect)(()=>{let a=0===l?e:t;if(Array.isArray(a)){let e=a.reduce((e,t)=>e+t.CPed*t.PRECIO,0),t=a.reduce((e,t)=>{let l=t.PRECIO*(1-t.PORC_DCTO/100)*(1+t.PORC_IMPUESTO/100);return e+t.CPed*l},0),l=Number(e).toFixed(0),i=Number(t).toFixed(0);n("".concat(parseFloat(l).toLocaleString())),o("".concat(parseFloat(i).toLocaleString()))}},[e,t,l]),{sumaSaldoTotal:a,sumaSaldoTotalDESC:s}};var g=l(75293),S=l(71014),I=l(75436),D=l(86898),b=l(2295),R=l(78562),P=l(22678),N=l(90507),T=l(97975),v=l(9561),w=l(70152),y=l(73378),L=l(79987),F=l(62347),U=l(23613);let z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90vh",maxWidth:"80vw",overflowY:"auto",overflowX:"hidden",padding:"16px",backgroundColor:"#fff",border:"2px solid #000",boxShadow:24};function M(e){let{children:t,value:l,index:i,...n}=e;return(0,a.jsx)("div",{role:"tabpanel",hidden:l!==i,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i),...n,children:l===i&&(0,a.jsx)(I.default,{sx:{p:3},children:t})})}function k(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}M.propTypes={children:s().node,index:s().number.isRequired,value:s().number.isRequired};let B=()=>{let e=(0,i.useRef)(),t=(0,d.useRouter)(),{form:l,changed:n}=(0,c.m)({}),{pedido:s,setPedido:f}=(0,_.A)(),[A,p]=(0,i.useState)([]),[m,C]=(0,i.useState)([]),[B,V]=(0,i.useState)([]),[W,Y]=(0,i.useState)({}),[G,H]=(0,i.useState)(s[0]),[J,Z]=(0,i.useState)([]),[q,X]=(0,i.useState)({}),[Q,$]=(0,i.useState)([]),[K,ee]=(0,i.useState)([]),et=(0,D.A)("(max-width: 600px)"),[el,ea]=(0,i.useState)(!1),[ei,en]=(0,i.useState)(0),es=0===ei?B:K,{sumaSaldoTotal:eo,sumaSaldoTotalDESC:er}=E(B,K,ei),{generarPDF:ed}=j(G,es,er),ec=()=>ea(!1);(0,i.useEffect)(()=>{eu(),e_(),ex()},[]);let eu=async()=>{try{let e=await fetch(o.c.url+"/productos/listar_solo_para_mg",{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();t&&(C(t),$(t))}catch(e){console.log("error",e)}},e_=async()=>{try{let e=await fetch(o.c.url+"/pedidos/detalle_lineas/".concat(G.PEDIDO),{method:"GET",headers:{"Content-Type":"application"}}),t=await e.json();t&&(V(t),console.log(t))}catch(e){console.log("error")}},ex=async()=>{try{let e=await fetch(o.c.url+"/pedidos/articulos_pendientes/".concat(G.PEDIDO),{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();t&&ee(t)}catch(e){console.log("error")}},eh=e=>{C(Q.filter(t=>{let l=t.ARTICULO&&t.ARTICULO.toString().toLowerCase(),a=t.DESCRIPCION&&t.DESCRIPCION.toString().toLowerCase();return(null==l?void 0:l.includes(e.toLowerCase()))||(null==a?void 0:a.includes(e.toLowerCase()))?t:null}).filter(e=>null!==e))},ef=(e,t)=>{e.reason===g.q.rowFocusOut&&(t.defaultMuiPrevented=!0)},eA=e=>{let t=B.findIndex(t=>t.ARTICULO===e.ARTICULO);if(-1===t)return console.error("ARTICULO NO ENCONTRADO"),e;let l={...e,isNew:!1},a=[...B];return a[t]=l,V(a),l},ep=e=>{X(e)},em=[{field:"ARTICULO",headerName:"CODIGO",width:100},{field:"DESCRIPCION",headerName:"REFERENCIA",width:500},{field:"PRECIO",headerName:"PRECIO",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},editable:!0,type:"number"},{field:"CPed",headerName:"CANT",width:80,type:"number",editable:!0},{field:"PORC_DCTO",headerName:"D1",width:70,valueFormatter:e=>{let t=Number(e).toFixed(1);return"".concat(parseFloat(t).toLocaleString())},editable:!0,type:"number"},{field:"PORC_IMPUESTO",headerName:"IVA",width:40,valueFormatter:e=>{let t=Number(e).toFixed(1);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"DISP",headerName:"DISP",width:70},{field:"Em",headerName:"EMP",width:80}],eC=async()=>{try{let e=await fetch(o.c.url+"/productos/actualizar_disponible/".concat(G.PEDIDO),{method:"POST",headers:{"Content-Type":"aaplication/json"}}),t=await e.json();console.log("Actualizacion Exitosa.",t),e.ok?await e_():console.error("Error en la actualizaci\xf3n:",e.statusText)}catch(e){console.error("Error de red",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(I.default,{children:[" "," "," ",(0,a.jsx)(h.A,{})," "," "]}),(0,a.jsxs)(r.A,{container:!0,spacing:2,direction:et?"column":"row",alignItems:"center",justifyContent:"space-between",children:[(0,a.jsx)("h2",{style:{margin:4},children:"PEDIDOS"}),(0,a.jsx)(r.A,{size:{xs:12,sm:6,md:6},sx:{padding:2},children:(0,a.jsxs)(I.default,{sx:{display:"flex",flexDirection:et?"column":"row",justifyContent:"center",alignItems:"center"},children:[(null==G?void 0:G.AUTORIZADONOM)==="APROBADO"?(0,a.jsxs)(b.default,{variant:"filled",sx:{bgcolor:"#fa4f4f"},onClick:ed,children:[" ",(0,a.jsx)(x.A,{})," "]}):(0,a.jsxs)(b.default,{variant:"filled",sx:{margin:1,bgcolor:"#fff64"},disabled:!0,children:[" ",(0,a.jsx)(x.A,{})," "]}),(0,a.jsxs)(b.default,{variant:"filled",sx:{margin:1,bgcolor:"#fff694"},onClick:()=>{let e="SI"===s.U_COMPESPECIAL?null:"SI",t={...G,U_COMPESPECIAL:e};f(t),H(t)},children:[" ",(0,a.jsx)(u.A,{})," "]}),(0,a.jsx)(b.default,{variant:"filled",sx:{margin:1,bgcolor:"#b6ff91"},onClick:()=>ea(!0),children:"MG"}),(0,a.jsx)(b.default,{variant:"filled",sx:{margin:1,bgcolor:"#f145af"},onClick:eC,children:"DISP"}),(0,a.jsxs)(b.default,{variant:"filled",sx:{margin:1,bgcolor:"#ffa28a"},onClick:()=>{t.push("../"),localStorage.removeItem("pedidoTemp")},children:[" ",(0,a.jsx)(O.A,{})," "]})]})})]}),(0,a.jsx)(I.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#fff",p:2,zoom:.8},children:(0,a.jsx)(R.A,{sx:{width:{xs:"90%",sm:"70%",md:"50%",lg:"40%"}},children:(0,a.jsxs)(r.A,{container:!0,spacing:2,children:[(0,a.jsx)(r.A,{size:{xs:12,sm:3},children:(0,a.jsxs)(P.A,{fullWidth:!0,children:[(0,a.jsx)(N.A,{children:"Estado"}),(0,a.jsx)(T.A,{value:(null==G?void 0:G.ESTADO)||"",label:"Estado"})]})}),(0,a.jsx)(r.A,{size:{xs:12,sm:3},children:(0,a.jsxs)(P.A,{fullWidth:!0,children:[(0,a.jsxs)(N.A,{children:[" ","Autorizacion"," "]}),(0,a.jsx)(T.A,{value:(null==G?void 0:G.AUTORIZADONOM)||"",label:"Autorizacion"})]})}),(0,a.jsx)(r.A,{size:{xs:12,sm:3},children:(0,a.jsxs)(P.A,{fullWidth:!0,children:[(0,a.jsxs)(N.A,{children:[" ","Impreso"," "]}),(0,a.jsx)(T.A,{value:(null==G?void 0:G.IMPRESO)||"",label:"Impreso"})]})}),(0,a.jsx)(r.A,{size:{xs:12,sm:3},children:(0,a.jsxs)(P.A,{fullWidth:!0,children:[(0,a.jsx)(N.A,{children:"Nro"}),(0,a.jsx)(T.A,{value:(null==G?void 0:G.PEDIDO)||"",label:"Nro"})]})}),(0,a.jsx)(r.A,{size:{xs:12,sm:3},children:(0,a.jsxs)(P.A,{fullWidth:!0,children:[(0,a.jsxs)(N.A,{children:[" ","Cliente"," "]}),(0,a.jsx)(T.A,{value:(null==G?void 0:G.CLIENTE)||"",label:"Cliente"})]})}),(0,a.jsx)(r.A,{size:{xs:12,sm:9},children:(0,a.jsxs)(P.A,{fullWidth:!0,children:[(0,a.jsx)(N.A,{}),(0,a.jsx)(T.A,{value:(null==G?void 0:G.NOMBRE_RAZON)||""})]})}),(0,a.jsx)(r.A,{size:{xs:12,sm:3},children:(0,a.jsxs)(P.A,{fullWidth:!0,children:[(0,a.jsx)(N.A,{children:"Fecha"}),(0,a.jsx)(T.A,{value:(null==G?void 0:G.FECHA_PEDIDO)||"",label:"Fecha"})]})}),(0,a.jsx)(r.A,{size:{xs:12,sm:3},children:(0,a.jsxs)(P.A,{fullWidth:!0,children:[(0,a.jsxs)(N.A,{children:[" ","Direccion de Envio"," "]}),(0,a.jsx)(T.A,{value:(null==G?void 0:G.DEPTO)||"",label:"Direccion Envio"})]})}),(0,a.jsx)(r.A,{size:{xs:12,sm:3},children:(0,a.jsxs)(P.A,{fullWidth:!0,children:[(0,a.jsx)(N.A,{}),(0,a.jsx)(T.A,{value:(null==G?void 0:G.CIUDAD)||""})]})}),(0,a.jsx)(r.A,{size:{xs:12,sm:3},children:(0,a.jsxs)(P.A,{fullWidth:!0,children:[(0,a.jsx)(N.A,{children:"Vend"}),(0,a.jsx)(T.A,{value:(null==G?void 0:G.VENDEDOR)||"",label:"Vend"})]})}),(0,a.jsx)(r.A,{size:{xs:12,sm:3},children:(0,a.jsxs)(R.A,{children:[(0,a.jsxs)(v.default,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:[" ","Especial"," "]}),(0,a.jsxs)(v.default,{sx:{fontSize:20,padding:.5,color:"red"},variant:"body2",color:"text.primary",children:[" ",(null==G?void 0:G.U_COMPESPECIAL)||""," "]})]})}),(0,a.jsx)(r.A,{size:{xs:12,sm:9},children:(0,a.jsxs)(P.A,{sx:{margin:.5,display:"flex"},children:[(0,a.jsxs)(N.A,{htmlFor:"component-disabled",children:[" ","Nota Factura (Doc2)"," "]}),(0,a.jsx)(T.A,{label:"Nota Factura (Doc2)",id:"OBSERVACIONES",name:"OBSERVACIONES",autoComplete:"OBSERVACIONES",autoFocus:!0,value:l.OBSERVACIONES||"",onChange:n})]})}),(0,a.jsx)(r.A,{size:{xs:12,sm:12},children:(0,a.jsxs)(P.A,{sx:{margin:.5,display:"flex"},children:[(0,a.jsx)(N.A,{htmlFor:"component-disabled"}),(0,a.jsx)(w.A,{id:"outlined-multiline-static",label:"Multiline",multiline:!0,rows:1,defaultValue:(null==G?void 0:G.OBSERVACIONES)||""})]})})]})})}),(0,a.jsxs)(r.A,{size:{xs:12},children:[(0,a.jsxs)(y.A,{value:ei,onChange:(e,t)=>{en(t)},"aria-label":"basic tabs example",children:[(0,a.jsx)(L.A,{label:"Detalles Lineas",...k(0)}),(0,a.jsx)(L.A,{label:"Articulos Pendientes",...k(1)})]}),(0,a.jsx)(M,{value:ei,index:0,children:(0,a.jsx)(I.default,{sx:{height:320,width:"100%"},children:(0,a.jsx)(S.z,{density:"compact",rows:B,columns:em,getRowId:e=>e.ARTICULO,editMode:"row",pageSizeOptions:[6,10,15],onRowEditStop:ef,processRowUpdate:eA,slotProps:{toolbar:{setProductosP:V,setRowModesModel:X}},onRowModesModelChange:ep,initialState:{pagination:{paginationModel:{page:0,pageSize:6}}}})})}),(0,a.jsx)(M,{value:ei,index:1,children:(0,a.jsx)(I.default,{sx:{height:320,width:"100%"},children:(0,a.jsx)(S.z,{density:"compact",rows:K,columns:em,pageSizeOptions:[6,10,15],getRowId:e=>e.ARTICULO,onRowEditStop:ef,processRowUpdate:eA,slotProps:{toolbar:{setProductosP:V,setRowModesModel:X}},onRowSelectionModelChange:ep,initialState:{pagination:{paginationModel:{page:0,pageSize:6}}}})})})]}),(0,a.jsx)(R.A,{elevation:3,sx:{padding:3,margin:3,marginTop:3},children:(0,a.jsx)(I.default,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,a.jsxs)(F.A,{variant:"text","aria-label":"text button group",sx:{height:60},children:[(0,a.jsxs)(b.default,{sx:{flexDirection:"column"},children:[(0,a.jsxs)(v.default,{sx:{display:"flex",fontSize:14,paddingRight:5},gutterBottom:!0,children:[" ","$",eo," "]}),(0,a.jsxs)("strong",{children:[" ","SUB-TOTAL"," "]})]}),(0,a.jsxs)(b.default,{sx:{flexDirection:"column"},children:[(0,a.jsxs)(v.default,{sx:{display:"flex",fontSize:14,paddingRight:5},gutterBottom:!0,children:[" ","$",er," "]}),(0,a.jsxs)("strong",{children:[" ","TOTAL"," "]})]})]})})}),(0,a.jsxs)(I.default,{sx:{flexDirection:"row",display:"flex",justifyContent:"flex-end"},children:[(0,a.jsxs)("strong",{children:[" ","Editado por: "," "," "]}),(0,a.jsxs)(v.default,{sx:{display:"flex",fontSize:14,paddingRight:5},gutterBottom:!0,children:[" ",(null==G?void 0:G.U_EDITADOPOR)||""," "]})]}),(0,a.jsx)(U.A,{open:el,onClose:ec,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsx)(I.default,{sx:z,children:(0,a.jsxs)(I.default,{sx:{padding:2,display:"flex",flexDirection:"column",gap:2},children:[(0,a.jsxs)(I.default,{sx:{display:"flex",flexDirection:et?"column":"row",justifyContent:"space-between",alignItems:"center",gap:2},children:[(0,a.jsx)("h2",{children:(0,a.jsx)("strong",{children:"PRODUCTOS"})}),(0,a.jsxs)(I.default,{display:"flex",gap:1,children:[(0,a.jsx)(b.default,{variant:"contained",color:"success",onClick:()=>{let e=J.map(e=>{let t=m.find(t=>t.ARTICULO===e);return t&&W[e]?{...t,CANTIDAD:W[e]}:null}).filter(Boolean);V(t=>{let l=[...t];return e.forEach(e=>{let t=l.find(t=>t.ARTICULO===e.ARTICULO);t?t.CANTIDAD+=e.CANTIDAD:l.push(e)}),l}),Z([]),Y({}),ec()},children:"Agregar"}),(0,a.jsx)(b.default,{variant:"contained",color:"error",onClick:ec,children:"Cerrar"})]})]}),(0,a.jsx)(I.default,{sx:{display:"flex",flexDirection:et?"column":"row",gap:2,alignItems:"center"},children:(0,a.jsx)(w.A,{id:"outlined-basic",placeholder:"Buscar Producto",value:A,onChange:e=>{e.preventDefault(),p(e.target.value),eh(e.target.value)},inputRef:e,sx:{width:"100%"}})}),(0,a.jsx)(I.default,{sx:{width:"100%",height:480},children:(0,a.jsx)(S.z,{density:"compact",rows:m,columns:[{field:"ARTICULO",headerName:"CODIGO",width:100},{field:"DESCRIPCION",headerName:"REFERENCIA",width:500,editable:!0},{field:"SUBLINEA",headerName:"SUBLINEA",width:300},{field:"PRECIO",headerName:"PRECIO",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},editable:!0,type:"number"},{field:"CANTIDAD",headerName:"CANT",width:80,type:"number",editable:!0},{field:"PORC_IMPUESTO",headerName:"IVA",width:40},{field:"PRECIOMASIVA",headerName:"MASIVA",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},editable:!0},{field:"PORC_DCTO",headerName:"D1",width:40},{field:"TOTAL_DISP",headerName:"DISP",width:70},{field:"UNIDAD_EMPAQUE",headerName:"EMP",width:80},{field:"EXIST_REAL",headerName:"EXISTREAL",width:90}],getRowId:e=>e.ARTICULO,pageSize:10,rowSelectionModel:J,processRowUpdate:eA,onRowSelectionModelChange:e=>{Z(e)},sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})]})})})]})},V=B},8889:(e,t,l)=>{"use strict";l.d(t,{c:()=>a,m:()=>i});let a={url:"http://172.20.20.3:8001"},i={url:"http://192.168.1.3:3010/api"}},70689:(e,t,l)=>{"use strict";l.d(t,{A:()=>d,AuthProvider:()=>r});var a=l(95155),i=l(12115),n=l(76046),s=l(89208);let o=(0,i.createContext)({login:e=>{},logout:()=>{}}),r=e=>{let{children:t}=e,l=(0,n.useRouter)(),[r]=(0,i.useState)(!0),[d,c]=(0,i.useState)(null),[u,_]=(0,i.useState)({}),[x,h]=(0,i.useState)({}),[f,A]=(0,i.useState)({}),p=(0,i.useCallback)(function(e){s.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),c(e)},[]),m=(0,i.useCallback)(function(){l.push("/"),s.A.remove("authTokens"),localStorage.removeItem("auth"),c(null)},[]);(0,i.useEffect)(()=>{let e=localStorage.getItem("auth")||s.A.get("authTokens"),t=localStorage.getItem("pedido"),l=localStorage.getItem("caja"),a=localStorage.getItem("cliente");a&&_(JSON.parse(a)),t&&h(JSON.parse(t)),l&&A(JSON.parse(l)),e&&c(JSON.parse(e))},[]);let C=(0,i.useMemo)(()=>({auth:d,cliente:u,setCliente:_,pedido:x,setPedido:h,caja:f,setCaja:A,loading:r,login:p,logout:m}),[d,u,x,f,p,m]);return(0,a.jsx)(o.Provider,{value:C,children:t})},d=()=>(0,i.useContext)(o)}},e=>{var t=t=>e(e.s=t);e.O(0,[339,8320,3930,9754,1083,1260,6403,152,8173,2670,7493,1669,1014,7567,1229,9477,7673,8441,1517,7358],()=>t(21678)),_N_E=e.O()}]);