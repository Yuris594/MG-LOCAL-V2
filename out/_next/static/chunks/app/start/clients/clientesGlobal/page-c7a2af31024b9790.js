(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2883],{66765:(e,t,a)=>{Promise.resolve().then(a.bind(a,58896))},58896:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(95155),l=a(75436),s=a(8889),o=a(39241),n=a(70152),i=a(71014),u=a(70689),d=a(12115);let h=[{field:"CLIENTE",headerName:"NIT",width:130,headerClassName:"super-app-theme--header"},{field:"NOMBREALIAS",headerName:"NOMBRE",width:600,headerClassName:"super-app-theme--header"},{field:"DIRECCION",headerName:"DIRECCION",width:300,headerClassName:"super-app-theme--header"},{field:"TELEFONO1",headerName:"TELEFONO",width:190,headerClassName:"super-app-theme--header"},{field:"NOMVENDEDOR",headerName:"VENDEDOR",width:200,headerClassName:"super-app-theme--header"},{field:"SALDO",headerName:"CARTERA",type:"number",width:120,headerClassName:"super-app-theme--header",valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"}],c=async()=>{try{let e=await fetch(s.c.url+"/clientes/listar",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Network response was not ok");return await e.json()}catch(e){return console.error("Error fetching clients:",e),[]}},p=e=>{let{setOpen:t,seleccionarCliente:a}=e,{setCliente:s}=(0,u.A)(),[p,g]=(0,d.useState)(""),[N,f]=(0,d.useState)([]),[m,E]=(0,d.useState)([]),[C,S]=(0,d.useState)([]);(0,d.useEffect)(()=>{(async()=>{let e=await c();e&&e.length>0?(S(e),E(e)):console.log("No se encontraron clientes")})()},[]);let w=e=>{S(m.filter(t=>{let a=t.CLIENTE&&t.CLIENTE.toString().toLowerCase(),r=t.NOMVENDEDOR&&t.NOMVENDEDOR.toString().toLowerCase(),l=t.NOMBREALIAS&&t.NOMBREALIAS.toLowerCase();return(null==a?void 0:a.includes(e.toLowerCase()))||(null==r?void 0:r.includes(e.toLowerCase()))||(null==l?void 0:l.includes(e.toLowerCase()))}))},O=(0,d.useCallback)(e=>{if(f(e),e.length>0){let r=m.filter(t=>{let a=t.CLIENTE;return a&&a.toString().includes(e[0])});localStorage.setItem("clientTemp",JSON.stringify(r)),s(r[0]),t(!1),a(r[0])}},[m]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(o.A,{container:!0,direction:"column",sx:{minHeight:"80vh",backgroundColor:"#ffffff",padding:2},children:[(0,r.jsxs)(l.default,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(o.A,{size:6,children:(0,r.jsx)("h2",{children:(0,r.jsx)("strong",{children:"CLIENTES"})})}),(0,r.jsx)(o.A,{size:6,children:(0,r.jsx)(n.A,{id:"outlined-basic",variant:"outlined",label:"Buscador...",value:p,onChange:e=>{e.preventDefault(),g(e.target.value),w(e.target.value)},sx:{width:"100%"}})})]}),(0,r.jsx)(o.A,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,r.jsx)(l.default,{sx:{height:650,width:"100%","& .super-app-theme--header":{backgroundColor:"#80f5e7",color:"#000000"}},children:(0,r.jsx)(i.z,{rows:C,columns:h,pageSizeOptions:[5,10,20,30],onRowSelectionModelChange:O,rowSelectionModel:N,getRowId:e=>e.CLIENTE,sx:{backgroundColor:"#ffffff"},initialState:{pagination:{paginationModel:{page:0,pageSize:10}}}})})})]})})}},8889:(e,t,a)=>{"use strict";a.d(t,{c:()=>r,m:()=>l});let r={url:"http://172.20.20.3:8001"},l={url:"http://192.168.1.3:3010/api"}},70689:(e,t,a)=>{"use strict";a.d(t,{A:()=>u,AuthProvider:()=>i});var r=a(95155),l=a(12115),s=a(76046),o=a(89208);let n=(0,l.createContext)({login:e=>{},logout:()=>{}}),i=e=>{let{children:t}=e,a=(0,s.useRouter)(),[i]=(0,l.useState)(!0),[u,d]=(0,l.useState)(null),[h,c]=(0,l.useState)({}),[p,g]=(0,l.useState)({}),[N,f]=(0,l.useState)({}),m=(0,l.useCallback)(function(e){o.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),d(e)},[]),E=(0,l.useCallback)(function(){a.push("/"),o.A.remove("authTokens"),localStorage.removeItem("auth"),d(null)},[]);(0,l.useEffect)(()=>{let e=localStorage.getItem("auth")||o.A.get("authTokens"),t=localStorage.getItem("pedido"),a=localStorage.getItem("caja"),r=localStorage.getItem("cliente");r&&c(JSON.parse(r)),t&&g(JSON.parse(t)),a&&f(JSON.parse(a)),e&&d(JSON.parse(e))},[]);let C=(0,l.useMemo)(()=>({auth:u,cliente:h,setCliente:c,pedido:p,setPedido:g,caja:N,setCaja:f,loading:i,login:m,logout:E}),[u,h,p,N,m,E]);return(0,r.jsx)(n.Provider,{value:C,children:t})},u=()=>(0,l.useContext)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[9754,1083,1260,6403,152,2670,1669,1014,8441,1517,7358],()=>t(66765)),_N_E=e.O()}]);