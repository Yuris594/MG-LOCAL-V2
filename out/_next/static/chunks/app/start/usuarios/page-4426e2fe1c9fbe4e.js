(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1671],{97895:(e,t,i)=>{Promise.resolve().then(i.bind(i,22536))},65068:(e,t,i)=>{"use strict";i.d(t,{A:()=>_});var l=i(95155),a=i(48173),s=i.n(a),n=i(75436),o=i(4918),r=i(41983),d=i(36017),u=i(2091),c=i(60391);let h=e=>{let{page:t}=e;return(0,l.jsx)(n.default,{children:(0,l.jsx)(o.A,{children:t.map(e=>(0,l.jsx)(r.Ay,{disablePadding:!0,children:(0,l.jsxs)(d.A,{LinkComponent:s(),href:e.url,onClick:e.onClick,children:[(0,l.jsx)(u.A,{children:e.icon}),(0,l.jsx)(c.A,{primaryTypographyProps:{fontSize:15,fontWeight:"medium",letterSpacing:0},children:e.title})]})},e.title))})})};var x=i(78897),m=i.n(x),f=i(12115),A=i(79046),E=i.n(A),j=i(2138),C=i(70689),p=i(96212),g=i(85067),O=i(85244),P=i(74676),v=i(92080),S=i(6069),D=i(9581),b=i(43677),R=i(20457),I=i(11451),N=i(46805),y=i(894),w=i(2295),U=i(9561),T=i(81894),z=i(91888);let _=()=>{let{auth:e,logout:t}=(0,C.A)(),[i,a]=(0,f.useState)(null),[o,r]=(0,f.useState)(!1),d=()=>{r(!1),a(null)},u=[{title:"USUARIOS ",url:"/start/usuarios/",icon:(0,l.jsx)(P.A,{})},{title:"PEDIDOS",url:"/start/pedidos/",icon:(0,l.jsx)(v.A,{})},{title:"CLIENTES",url:"/start/clients/",icon:(0,l.jsx)(p.A,{})},{title:"PRODUCTOS",icon:(0,l.jsx)(S.A,{}),onClick:e=>{r(!0),a(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas/",icon:(0,l.jsx)(D.A,{})},{title:"CAJA",url:"/start/pedidos/pedidosCaja/",icon:(0,l.jsx)(b.A,{})}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(R.default,{}),(0,l.jsxs)(n.default,{sx:{flexGrow:1},children:[(0,l.jsx)(I.A,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,l.jsxs)(N.A,{children:[(0,l.jsx)(y.A,{color:"inherit",onClick:e=>{a(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,l.jsx)(O.A,{})}),(0,l.jsx)(n.default,{sx:{display:{xs:"none",md:"flex"}},children:u.map(e=>(0,l.jsx)(w.default,{sx:{fontSize:"15px"},color:"inherit",size:"large",LinkComponent:s(),href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,l.jsx)(U.default,{variant:"h6",sx:{flexGrow:1}}),(0,l.jsx)(w.default,{component:s(),href:"/start",color:"inherit",children:(0,l.jsx)(j.A,{})}),(0,l.jsxs)(w.default,{className:E().className,color:"inherit",sx:{fontSize:"15px"},children:[(0,l.jsx)(p.A,{}),e&&e.PER_Nom]}),(0,l.jsx)(w.default,{color:"inherit",onClick:()=>{m().fire({title:"\xbfQuieres terminar la Sesi\xf3n?",icon:"question",showCancelButton:!0,confirmButtonColor:"#09ff00",cancelButtonColor:"#fa0000",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&t()})},children:(0,l.jsx)(g.A,{})})]})}),(0,l.jsxs)(T.A,{id:"basic-menu",anchorEl:i,open:o,onClose:d,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,l.jsx)(z.A,{onClick:d,component:s(),href:"/start/buscarProd/",children:"Buscar Por Referencias"}),(0,l.jsx)(z.A,{onClick:d,component:s(),href:"/start/productosMG/",children:"Lista de Todos Los Productos"})]}),(0,l.jsx)(T.A,{id:"basic-menu",anchorEl:i,MenuListProps:{"aria-labelledby":"basic-button"},open:!!i,onClose:()=>{a(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,l.jsx)(h,{page:u})})]})]})}},11434:(e,t,i)=>{"use strict";i.d(t,{m:()=>a});var l=i(12115);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,i]=(0,l.useState)(e);return{form:t,changed:e=>{let{name:l,value:a}=e.target;i({...t,[l]:a})},setForm:i}}},14447:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>E});var l=i(95155),a=i(8889),s=i(39241),n=i(12115),o=i(11434),r=i(35761),d=i(86898),u=i(20457),c=i(75436),h=i(70152),x=i(2295),m=i(80906),f=i(10897);let A=async e=>(await fetch(a.c.url+"/usuarios/actualizar/",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json(),E=e=>{let{usuario:t,onClose:i}=e,[a,E]=(0,n.useState)(!1),[j,C]=(0,n.useState)(!1),{form:p,setForm:g,changed:O}=(0,o.m)(),P=(0,r.default)();(0,d.A)(P.breakpoints.down("sm")),(0,n.useEffect)(()=>{t&&t.length>0&&g({IdPer:t[0].IdPer,PER_Nom:t[0].PER_Nom||"",PER_Usuario:t[0].PER_Usuario||"",PER_Clave:t[0].PER_Clave||"",IdDiv:t[0].IdDiv||"",PERAUTOPED:t[0].PERAUTOPED||"",CODVEND:t[0].CODVEND||"",PREFIJO:t[0].PREFIJO||"",CONSECUTIVOPED:t[0].CONSECUTIVOPED||""})},[t]);let v=async e=>{e.preventDefault();try{let e=await A(p);e.ok?(onclose(),E(!0),setTimeout(()=>{window.location.reload()},2e3)):(console.log("Error",e.statusText),C(!0))}catch(e){console.error("Error al enviar la solicitud:",e),C(!0)}},S=e=>{"clickaway"!==e&&(E(!1),C(!1))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.default,{}),(0,l.jsxs)(c.default,{component:"form",onSubmit:v,children:[(0,l.jsx)("h3",{style:{textAlign:"center"},children:"ACTUALIZACI\xd3N DE USUARIO"}),(0,l.jsxs)(s.A,{container:!0,spacing:2,children:[(0,l.jsx)(s.A,{size:{sx:12,md:6},children:(0,l.jsx)(h.A,{required:!0,fullWidth:!0,id:"PER_Nom",label:"NOMBRE",name:"PER_Nom",autoFocus:!0,value:p.PER_Nom||"",onChange:O})}),(0,l.jsx)(s.A,{size:{sx:12,md:6},children:(0,l.jsx)(h.A,{required:!0,fullWidth:!0,id:"PER_Usuario",label:"USUARIO",name:"PER_Usuario",value:p.PER_Usuario||"",onChange:O})}),(0,l.jsx)(s.A,{size:{sx:12,md:12},children:(0,l.jsx)(h.A,{required:!0,fullWidth:!0,id:"PER_Clave",label:"CLAVE",type:"password",name:"PER_Clave",value:p.PER_Clave||"",onChange:O})}),(0,l.jsx)(s.A,{size:{sx:12,md:6},children:(0,l.jsx)(h.A,{required:!0,fullWidth:!0,name:"IdDiv",label:"IdDIV",type:"number",id:"IdDiv",value:p.IdDiv||"",onChange:O})}),(0,l.jsx)(s.A,{size:{sx:12,md:6},children:(0,l.jsx)(h.A,{required:!0,fullWidth:!0,id:"PERAUTOPED",label:"PERAUTOPED",type:"number",name:"PERAUTOPED",value:p.PERAUTOPED||"",onChange:O})}),(0,l.jsx)(s.A,{size:{sx:12,md:4},children:(0,l.jsx)(h.A,{fullWidth:!0,id:"CODVEND",label:"COD-VEND",name:"CODVEND",value:p.CODVEND||"",onChange:O})}),(0,l.jsx)(s.A,{size:{sx:12,md:4},children:(0,l.jsx)(h.A,{fullWidth:!0,id:"PREFIJO",label:"PREFIJO",name:"PREFIJO",value:p.PREFIJO||"",onChange:O})}),(0,l.jsx)(s.A,{size:{sx:12,md:4},children:(0,l.jsx)(h.A,{fullWidth:!0,id:"CONSECUTIVOPED",label:"CONSECUTIVO",type:"number",name:"CONSECUTIVOPED",value:p.CONSECUTIVOPED||"",onChange:O})}),(0,l.jsx)(s.A,{size:{sx:12,md:12},children:(0,l.jsx)(x.default,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Actualizar"})})]})]}),a&&(0,l.jsx)(m.A,{open:a,autoHideDuration:2e3,onClose:S,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,l.jsx)(f.A,{onClose:S,severity:"success",sx:{width:"100%"},children:"Actualizacion Exitosa"})}),j&&(0,l.jsx)(m.A,{open:j,autoHideDuration:2e3,onClose:S,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,l.jsx)(f.A,{onClose:S,severity:"error",sx:{width:"100%"},children:"Actualizacion Denegada"})})]})}},22536:(e,t,i)=>{"use strict";i.r(t),i.d(t,{conexion:()=>P,default:()=>S});var l=i(95155),a=i(78897),s=i.n(a),n=i(8889),o=i(39241),r=i(41108),d=i(76046),u=i(70689),c=i(14447),h=i(65068),x=i(71014),m=i(49359),f=i(12115),A=i(86898),E=i(75436),j=i(54255),C=i(23613),p=i(2295),g=i(70152);let O={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"60vh",maxWidth:"30vw",overflowY:"auto",overflowX:"hidden",padding:"16px",bgcolor:"#fff",border:"2px solid #000",boxShadow:24};function P(){s().fire({title:"No existe conexion",text:"Verifique la conexion con la empresa o no tiene internet",icon:"warning",button:"Aceptar"})}let v=[{field:"PER_Nom",headerName:"NOMBRE",width:200,editable:!0},{field:"PER_Usuario",headerName:"USUARIO",width:150,editable:!0},{field:"PER_Clave",headerName:"CONTRASE\xd1A",width:150,editable:!0},{field:"IdDiv",headerName:"ID DIVISI\xd3N",type:"number",width:120,editable:!0},{field:"PERAUTOPED",headerName:"AUTO PEDIDOS",type:"number",width:130,editable:!0},{field:"CODVEND",headerName:"C\xd3DIGO VENDEDOR",width:160,editable:!0},{field:"PREFIJO",headerName:"PREFIJO",width:100,editable:!0},{field:"CONSECUTIVOPED",headerName:"CONSECUTIVO PEDIDOS",type:"number",width:180,editable:!0}],S=function(){let e=(0,d.useRouter)(),{auth:t}=(0,u.A)(),[i,a]=(0,f.useState)(!1),P=()=>a(!1),[S,D]=(0,f.useState)(!1),[b,R]=(0,f.useState)([]),[I,N]=(0,f.useState)([]),[y,w]=(0,f.useState)([]),[U,T]=(0,f.useState)(),[z,_]=(0,f.useState)([]),[V,k]=(0,f.useState)([]),[J,W]=(0,f.useState)(!0),F=(0,A.A)("(max-width : 600px)");(0,f.useEffect)(()=>{B()},[]);let q=()=>{R([]),D(!1)},B=async()=>{try{let e=await fetch(n.c.url+"/usuarios/listar",{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();t&&(W(!1),N(t),_(t))}catch(e){console.log(e)}},L=e=>{N(z.filter(t=>Object.values(t).map(e=>e?e.toString().toLowerCase():"").some(t=>t.includes(e))))},M=(0,f.useCallback)(e=>{k(e),e.length>0&&(R(z.filter(t=>{let i=t.IdPer;return!!i&&i.toString().includes(e[0])})),D(!0))},[I]);return((0,f.useEffect)(()=>{void 0===t||(T(!1),t&&8===t.IdDiv||(e.push("/start"),s().fire({title:"No Autorizado.",text:"Usted No Tiene Autorizaci\xf3n Para Visualizar Esta Pagina!!",icon:"info"})))},[t,e]),U)?(0,l.jsx)(E.default,{sx:{width:"100%"},children:(0,l.jsx)(j.A,{})}):t&&8===t.IdDiv?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(E.default,{children:[" ",(0,l.jsx)(h.A,{})," "," "]}),(0,l.jsx)(E.default,{className:"container",children:!0===J?(0,l.jsx)(E.default,{sx:{width:"100%"},children:(0,l.jsx)(j.A,{})}):(0,l.jsxs)(E.default,{style:{height:"auto",width:"100%"},children:[(0,l.jsx)(C.A,{open:i,onClose:P,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsx)(E.default,{sx:O,children:(0,l.jsx)(r.default,{onClose:P})})}),(0,l.jsx)(C.A,{open:S,onClose:q,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsx)(E.default,{sx:O,children:(0,l.jsx)(c.default,{usuario:b,onClose:q})})}),(0,l.jsxs)(o.A,{container:!0,direction:"column",sx:{minHeight:"90vh",backfroundColor:"#ffffff",padding:2},children:[(0,l.jsxs)(E.default,{sx:{display:"flex",flexDirection:F?"column":"row",alignItems:"center",gap:2,marginBottom:2},children:[(0,l.jsx)(o.A,{size:{xs:12,sm:6,md:6},children:(0,l.jsx)("h2",{children:(0,l.jsx)("strong",{children:"USUARIOS"})})}),(0,l.jsx)(o.A,{size:{sx:12,sm:2,md:1},children:(0,l.jsx)(p.default,{variant:"outlined",onClick:()=>a(!0),color:"primary",children:"Nuevo Usuario"})}),(0,l.jsx)(o.A,{size:{xs:12,sm:4,md:5},children:(0,l.jsx)(g.A,{id:"outlined-basic",placeholder:"Buscar...",value:y,onChange:e=>{e.preventDefault(),w(e.target.value),L(e.target.value)},variant:"outlined",sx:{width:"100%"}})})]}),(0,l.jsx)(o.A,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,l.jsx)(E.default,{sx:{height:F?500:779,width:"100%"},children:(0,l.jsx)(x.z,{rows:I,columns:v,initialState:{pagination:{paginationModel:{page:0,pageSize:12}}},pageSizeOptions:[12,36],getRowId:e=>e.IdPer,onRowSelectionModelChange:M,rowSelectionModel:V,slots:{toolbar:m.O},sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})})]})]})})]}):null}},41108:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>A});var l=i(95155),a=i(12115),s=i(8889),n=i(39241),o=i(35761),r=i(86898),d=i(20457),u=i(75436),c=i(70152),h=i(2295),x=i(80906),m=i(10897);let f=async e=>(await fetch(s.c.url+"/usuarios/nuevo",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json(),A=e=>{let{onClose:t}=e,[i,s]=(0,a.useState)({}),[A,E]=(0,a.useState)(!1),[j,C]=(0,a.useState)(!1),p=(0,o.default)();(0,r.A)(p.breakpoints.down("sm"));let g=e=>{s({...i,[e.target.name]:e.target.value})},O=async e=>{if(e.preventDefault(),console.log("Datos del formulario",i),!i.PER_Nom||!i.IdDiv){C(!0);return}try{(await f(i)).ok?(t(),E(!0),console.log("Salida exitosa"),window.location.reload()):C(!0)}catch(e){console.error("Error al enviar la solicitud: ",e)}},P=e=>{"clickaway"!==e&&(E(!1),C(!1))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.default,{}),(0,l.jsxs)(u.default,{component:"form",onSubmit:O,children:[(0,l.jsx)("h3",{style:{textAlign:"center"},children:"REGISTRO DE USUARIO"}),(0,l.jsxs)(n.A,{container:!0,spacing:2,children:[(0,l.jsx)(n.A,{size:{sx:12,md:6},children:(0,l.jsx)(c.A,{autoComplete:"given-name",name:"PER_Nom",required:!0,fullWidth:!0,id:"PER_Nom",label:"NOMBRE",autoFocus:!0,value:i.PER_Nom||"",onChange:g})}),(0,l.jsx)(n.A,{size:{sx:12,md:6},children:(0,l.jsx)(c.A,{required:!0,fullWidth:!0,id:"Usuario",label:"USUARIO",name:"PER_Usuario",autoComplete:"family-name",value:i.PER_Usuario||"",onChange:g})}),(0,l.jsx)(n.A,{size:{sx:12,md:12},children:(0,l.jsx)(c.A,{required:!0,fullWidth:!0,id:"Clave",label:"CLAVE",type:"password",name:"PER_Clave",autoComplete:"email",value:i.PER_Clave||"",onChange:g})}),(0,l.jsx)(n.A,{size:{sx:12,md:6},children:(0,l.jsx)(c.A,{required:!0,fullWidth:!0,name:"IdDiv",label:"IdDIV",type:"number",id:"IdDiv",autoComplete:"new-password",value:i.IdDiv||"",onChange:g})}),(0,l.jsx)(n.A,{size:{sx:12,md:6},children:(0,l.jsx)(c.A,{fullWidth:!0,id:"PERAUTOPED",label:"PERAUTOPED",type:"number",name:"PERAUTOPED",autoComplete:"email",value:i.PERAUTOPED||"",onChange:g})}),(0,l.jsx)(n.A,{size:{sx:12,md:4},children:(0,l.jsx)(c.A,{fullWidth:!0,id:"CODVEND",label:"CODVEND",name:"CODVEND",autoComplete:"email",value:i.CODVEND||"",onChange:g})}),(0,l.jsx)(n.A,{size:{sx:12,md:4},children:(0,l.jsx)(c.A,{fullWidth:!0,id:"PREFIJO",label:"PREFIJO",name:"PREFIJO",autoComplete:"email",value:i.PREFIJO||"",onChange:g})}),(0,l.jsx)(n.A,{size:{sx:12,md:4},children:(0,l.jsx)(c.A,{fullWidth:!0,id:"CONSECUTIVOPED",label:"CONSECUTIVOPED",type:"number",name:"CONSECUTIVOPED",autoComplete:"email",value:i.CONSECUTIVOPED||"",onChange:g})}),(0,l.jsx)(n.A,{size:{sx:12,md:12},children:(0,l.jsx)(h.default,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"registrar"})})]})]}),A?(0,l.jsx)(x.A,{open:A,autoHideDuration:2e3,onClose:P,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,l.jsx)(m.A,{onClose:P,severity:"success",sx:{width:"100%"},children:"Registro Exitoso"})}):"",j?(0,l.jsx)(x.A,{open:j,autoHideDuration:2e3,onClose:P,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,l.jsx)(m.A,{onClose:P,severity:"error",sx:{width:"100%"},children:"Registro denegado"})}):""]})}},8889:(e,t,i)=>{"use strict";i.d(t,{c:()=>l,m:()=>a});let l={url:"http://172.20.20.3:8001"},a={url:"http://192.168.1.3:3010/api"}},70689:(e,t,i)=>{"use strict";i.d(t,{A:()=>d,AuthProvider:()=>r});var l=i(95155),a=i(12115),s=i(76046),n=i(89208);let o=(0,a.createContext)({login:e=>{},logout:()=>{}}),r=e=>{let{children:t}=e,i=(0,s.useRouter)(),[r]=(0,a.useState)(!0),[d,u]=(0,a.useState)(null),[c,h]=(0,a.useState)({}),[x,m]=(0,a.useState)({}),[f,A]=(0,a.useState)({}),E=(0,a.useCallback)(function(e){n.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),u(e)},[]),j=(0,a.useCallback)(function(){i.push("/"),n.A.remove("authTokens"),localStorage.removeItem("auth"),u(null)},[]);(0,a.useEffect)(()=>{let e=localStorage.getItem("auth")||n.A.get("authTokens"),t=localStorage.getItem("pedido"),i=localStorage.getItem("caja"),l=localStorage.getItem("cliente");l&&h(JSON.parse(l)),t&&m(JSON.parse(t)),i&&A(JSON.parse(i)),e&&u(JSON.parse(e))},[]);let C=(0,a.useMemo)(()=>({auth:d,cliente:c,setCliente:h,pedido:x,setPedido:m,caja:f,setCaja:A,loading:r,login:E,logout:j}),[d,c,x,f,E,j]);return(0,l.jsx)(o.Provider,{value:C,children:t})},d=()=>(0,a.useContext)(o)}},e=>{var t=t=>e(e.s=t);e.O(0,[339,8320,9754,1083,1260,6403,152,8173,2670,7493,1669,1014,3882,6006,8441,1517,7358],()=>t(97895)),_N_E=e.O()}]);