(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4207],{83686:()=>{},32383:()=>{},63913:(e,t,r)=>{Promise.resolve().then(r.bind(r,89372))},20457:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var a=r(12115),o=r(15438),l=r(12567),i=r(95155);let n="function"==typeof(0,o.Dp)({}),s=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),d=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),c=function(e){var t,r;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o={};a&&e.colorSchemes&&"function"==typeof e.getColorSchemeSelector&&Object.entries(e.colorSchemes).forEach(t=>{var r,a;let[l,i]=t,n=e.getColorSchemeSelector(l);n.startsWith("@")?o[n]={":root":{colorScheme:null===(r=i.palette)||void 0===r?void 0:r.mode}}:o[n.replace(/\s*&/,"")]={colorScheme:null===(a=i.palette)||void 0===a?void 0:a.mode}});let l={html:s(e,a),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...d(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...o},i=null===(r=e.components)||void 0===r?void 0:null===(t=r.MuiCssBaseline)||void 0===t?void 0:t.styleOverrides;return i&&(l=[l,i]),l},u="mui-ecs",h=e=>{let t=c(e,!1),r=Array.isArray(t)?t[0]:t;return!e.vars&&r&&(r.html[":root:has(".concat(u,")")]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(t=>{var a,o;let[l,i]=t,n=e.getColorSchemeSelector(l);n.startsWith("@")?r[n]={[":root:not(:has(.".concat(u,"))")]:{colorScheme:null===(a=i.palette)||void 0===a?void 0:a.mode}}:r[n.replace(/\s*&/,"")]={["&:not(:has(.".concat(u,"))")]:{colorScheme:null===(o=i.palette)||void 0===o?void 0:o.mode}}}),t},m=(0,o.Dp)(n?e=>{let{theme:t,enableColorScheme:r}=e;return c(t,r)}:e=>{let{theme:t}=e;return h(t)}),p=function(e){let{children:t,enableColorScheme:r=!1}=(0,l.b)({props:e,name:"MuiCssBaseline"});return(0,i.jsxs)(a.Fragment,{children:[n&&(0,i.jsx)(m,{enableColorScheme:r}),!n&&!r&&(0,i.jsx)("span",{className:u,style:{display:"none"}}),t]})}},65068:(e,t,r)=>{"use strict";r.d(t,{A:()=>k});var a=r(95155),o=r(48173),l=r.n(o),i=r(75436),n=r(4918),s=r(41983),d=r(36017),c=r(2091),u=r(60391);let h=e=>{let{page:t}=e;return(0,a.jsx)(i.default,{children:(0,a.jsx)(n.A,{children:t.map(e=>(0,a.jsx)(s.Ay,{disablePadding:!0,children:(0,a.jsxs)(d.A,{LinkComponent:l(),href:e.url,onClick:e.onClick,children:[(0,a.jsx)(c.A,{children:e.icon}),(0,a.jsx)(u.A,{primaryTypographyProps:{fontSize:15,fontWeight:"medium",letterSpacing:0},children:e.title})]})},e.title))})})};var m=r(78897),p=r.n(m),x=r(12115),f=r(79046),A=r.n(f),S=r(2138),g=r(70689),C=r(96212),b=r(85067),N=r(85244),E=r(74676),j=r(92080),O=r(6069),I=r(9581),w=r(43677),v=r(20457),y=r(11451),R=r(46805),T=r(894),F=r(2295),D=r(9561),L=r(81894),P=r(91888);let k=()=>{let{auth:e,logout:t}=(0,g.A)(),[r,o]=(0,x.useState)(null),[n,s]=(0,x.useState)(!1),d=()=>{s(!1),o(null)},c=[{title:"USUARIOS ",url:"/start/usuarios/",icon:(0,a.jsx)(E.A,{})},{title:"PEDIDOS",url:"/start/pedidos/",icon:(0,a.jsx)(j.A,{})},{title:"CLIENTES",url:"/start/clients/",icon:(0,a.jsx)(C.A,{})},{title:"PRODUCTOS",icon:(0,a.jsx)(O.A,{}),onClick:e=>{s(!0),o(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas/",icon:(0,a.jsx)(I.A,{})},{title:"CAJA",url:"/start/pedidos/pedidosCaja/",icon:(0,a.jsx)(w.A,{})}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.default,{}),(0,a.jsxs)(i.default,{sx:{flexGrow:1},children:[(0,a.jsx)(y.A,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,a.jsxs)(R.A,{children:[(0,a.jsx)(T.A,{color:"inherit",onClick:e=>{o(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,a.jsx)(N.A,{})}),(0,a.jsx)(i.default,{sx:{display:{xs:"none",md:"flex"}},children:c.map(e=>(0,a.jsx)(F.default,{sx:{fontSize:"15px"},color:"inherit",size:"large",LinkComponent:l(),href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,a.jsx)(D.default,{variant:"h6",sx:{flexGrow:1}}),(0,a.jsx)(F.default,{component:l(),href:"/start",color:"inherit",children:(0,a.jsx)(S.A,{})}),(0,a.jsxs)(F.default,{className:A().className,color:"inherit",sx:{fontSize:"15px"},children:[(0,a.jsx)(C.A,{}),e&&e.PER_Nom]}),(0,a.jsx)(F.default,{color:"inherit",onClick:()=>{p().fire({title:"\xbfQuieres terminar la Sesi\xf3n?",icon:"question",showCancelButton:!0,confirmButtonColor:"#09ff00",cancelButtonColor:"#fa0000",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&t()})},children:(0,a.jsx)(b.A,{})})]})}),(0,a.jsxs)(L.A,{id:"basic-menu",anchorEl:r,open:n,onClose:d,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,a.jsx)(P.A,{onClick:d,component:l(),href:"/start/buscarProd/",children:"Buscar Por Referencias"}),(0,a.jsx)(P.A,{onClick:d,component:l(),href:"/start/productosMG/",children:"Lista de Todos Los Productos"})]}),(0,a.jsx)(L.A,{id:"basic-menu",anchorEl:r,MenuListProps:{"aria-labelledby":"basic-button"},open:!!r,onClose:()=>{o(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,a.jsx)(h,{page:c})})]})]})}},76134:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(95155),o=r(7660),l=r(12115),i=r(2295);let n=e=>{let{datos:t}=e,[r,n]=(0,l.useState)(!1);return(0,a.jsx)(i.default,{variant:"outlined",color:"success",onClick:()=>{if(!Array.isArray(t)||0===t.length){console.error("Datos no est\xe1n en el formato correcto o est\xe1n vac\xedos.");return}n(!0);try{let e=o.Wp.book_new(),r=o.Wp.json_to_sheet(t);o.Wp.book_append_sheet(e,r,"Datos"),o._h(e,"datos.xlsx")}catch(e){console.error("Error al generar el archivo Excel",e)}finally{n(!1)}},disabled:r,children:r?"Loading...":"Excel"})}},89372:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var a=r(95155),o=r(78897),l=r.n(o),i=r(81996),n=r.n(i),s=r(8889),d=r(39241),c=r(12115),u=r(71014);let h=(0,r(12983).A)((0,a.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");var m=r(65068),p=r(76134),x=r(75436),f=r(9561),A=r(35761),S=r(86898),g=r(4230),C=r(70152),b=r(894),N=r(73378),E=r(79987),j=r(54255);function O(e){let{children:t,value:r,index:o,...l}=e;return(0,a.jsx)("div",{role:"tabpanel",hidden:r!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o),...l,children:r===o&&(0,a.jsx)(x.default,{sx:{p:3},children:t})})}function I(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}O.propTypes={children:n().node,index:n().number.isRequired,value:n().number.isRequired};let w=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),v=[{field:"ARTICULO",headerName:"COD",width:130},{field:"DESCRIPCION",headerName:"REFERENCIA",width:700},{field:"SUBLINEA",headerName:"SUBLINEA",width:300},{field:"TOTAL_DISP",headerName:"DISP-MG",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"EXIST_REAL",headerName:"EXIST-REAL",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PRECIO",headerName:"PRECIO",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PORC_IMPUESTO",headerName:"IVA",width:130,valueFormatter:e=>{let t=Number(e).toFixed(1);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PRECIOMASIVA",headerName:"MASIVA",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PORC_DCTO",headerName:"D1",width:130,valueFormatter:e=>{let t=Number(e).toFixed(1);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"UNIDAD_EMPAQUE",headerName:"EMP",width:130}],y=[{field:"FACTURA",headerName:"FACTURA",width:130},{field:"FECHA_DESPACHO",headerName:"FECHA",width:190,renderCell:e=>w(e.value)},{field:"ANULADA",headerName:"AN",width:50},{field:"PRECIO_TOTAL",headerName:"VALOR FACT",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PEDIDO",headerName:"PEDIDO",width:130,cellClassName:"pedido-cell"},{field:"ARTICULO",headerName:"ARTICULO",width:130},{field:"DESCRIPCION",headerName:"DESCRIPCION",width:500},{field:"CANTIDAD",headerName:"CANT",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PRECIO_UNITARIO",headerName:"PRECIO UNI.",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PORCIVA",headerName:"IVA",width:130,valueFormatter:e=>{let t=Number(e).toFixed(1);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PORDESC",headerName:"DESC",width:130,valueFormatter:e=>{let t=Number(e).toFixed(1);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"TOTAL_MERCADERIA",headerName:"VALOR TOTAL",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number",cellClassName:"autor-cell"},{field:"IDRUTERO",headerName:"ID RUTERO",width:130},{field:"IDGUIA",headerName:"ID GUIA",width:130},{field:"OBSERVACIONES",headerName:"OBSERVACIONES",width:800},{field:"RUBRO1",headerName:"DOCS 2",width:500}],R=[{field:"FECHA",headerName:"FECHA",width:250,renderCell:e=>w(e.value)},{field:"CLIENTE",headerName:"CLIENTE",width:160},{field:"PEDIDO",headerName:"PEDIDO",width:100,cellClassName:"pedido-cell"},{field:"PED",headerName:"PED",width:100,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"DESP",headerName:"DESP",width:100,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PEND",headerName:"PEND",width:100,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"ESTADO",headerName:"ESTADO",width:120},{field:"AUTORIZADO",headerName:"AUTORIZADO",width:200,renderCell:e=>{let t=e.row.AUTORIZADO;return(0,a.jsx)(f.default,{style:{color:"APROBADO"===t?"#00ff00":"RETENIDO"===t?"#ff0000":"#000000",backgroundColor:"transparent"},children:t})}},{field:"VE",headerName:"VEND",width:80,cellClassName:"autor-cell"}],T=async e=>{let t=await fetch(s.c.url+"/productos/facturas/".concat(e.ARTICULO),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){if(404===t.status)return console.log("No hay facturas para este producto."),[];throw Error("Error en la solicitud: ".concat(t.status))}try{return await t.json()}catch(e){throw console.error("Error al analizar JSON:",e),Error("La respuesta no tiene un formato JSON v\xe1lido.")}},F=async e=>{let t=await fetch(s.c.url+"/productos/pedidos/".concat(e.ARTICULO),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok&&404===t.status)return console.log("No hay pedidos para este producto."),[];try{return await t.json()}catch(e){throw console.error("Error al analizar JSON:",e),Error("La respuesta no tiene un formato JSON v\xe1lido.")}},D=()=>{let[e,t]=(0,c.useState)(0),[r,o]=(0,c.useState)([]),[i,n]=(0,c.useState)([]),[f,w]=(0,c.useState)("ARTICULO"),[D,L]=(0,c.useState)([]),[P,k]=(0,c.useState)(!0),[U,z]=(0,c.useState)(""),[_,M]=(0,c.useState)(""),[B,W]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),J=(0,A.default)();(0,S.A)(J.breakpoints.down("sm"));let V=(0,c.useRef)(null),q=async()=>{f?W(!1):W(!0),U.trim()?H(!1):H(!0),k(!0);try{let e="ARTICULO"===f?s.c.url+"/productos/".concat(U):s.c.url+"/productos/descripcion/".concat(U),r=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(r.ok){let e=await r.json();L(e),e.length>0&&(M(e[0]),t(0),console.log("Referencia encontrada..."))}else console.log("Error en la busqueda:",r.statusText),L([]),t(0),l().fire({icon:"warning",title:"La Referencia Solicitada No Existe."}),M("")}catch(e){console.log("Error al momento de realizar la busqueda",e),L([])}finally{k(!1)}},Z=async()=>{let e=await T(_);n([]);try{e?n(e):n([]),k(!1)}catch(e){console.log("Este articulo no tiene facturas",e)}},Q=async()=>{let e=await F(_);o([]);try{e?o(e):o([]),k(!1)}catch(e){console.log("Este articulo no tiene pedidos",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.A,{}),(0,a.jsxs)(d.A,{container:!0,direction:"column",sx:{minHeight:"90vh",backgroundColor:"#ffffff",padding:2},children:[(0,a.jsx)(d.A,{size:12,children:(0,a.jsxs)(x.default,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsxs)(x.default,{display:"flex",alignItems:"center",gap:2,children:[(0,a.jsx)("h2",{children:(0,a.jsx)("strong",{children:"Buscar Por"})}),(0,a.jsx)(g.A,{id:"size-small-outlined",size:"small",disablePortal:!0,options:[{label:"ARTICULO"},{label:"REFERENCIA"}],value:f,onChange:(e,t)=>{w((null==t?void 0:t.label)||""),t&&V.current.focus()},renderInput:e=>(0,a.jsx)(C.A,{...e,label:"Criterio de Busqueda",variant:"outlined",error:B,helperText:B?"El criterio es requerido":""}),sx:{width:190}}),(0,a.jsx)(C.A,{inputRef:V,id:"outlined-basic",size:"small",value:U,onChange:e=>{z(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&q()},error:G,helperText:G?"Este valor es requerido":"",sx:{width:190}}),(0,a.jsx)(b.A,{onClick:q,children:(0,a.jsx)(h,{sx:{fontSize:45},color:"success"})})]}),(0,a.jsx)(x.default,{children:(0,a.jsxs)("h3",{style:{margin:0,color:"#db2093"},children:[_.ARTICULO," - ",_.DESCRIPCION]})}),(0,a.jsx)(p.A,{datos:D})]})}),(0,a.jsx)(d.A,{size:12,children:(0,a.jsxs)(x.default,{sx:{width:"100%"},children:[(0,a.jsx)(x.default,{sx:{borderBottom:1,borderColor:"divider"},children:(0,a.jsxs)(N.A,{value:e,onChange:(e,r)=>{t(r)},variant:"fullWidth","aria-label":"full width tabs example",children:[(0,a.jsx)(E.A,{label:"Articulos",...I(0)}),(0,a.jsx)(E.A,{label:"Pedidos: ".concat(r.length),...I(1),onClick:Q}),(0,a.jsx)(E.A,{label:"Facturas: ".concat(i.length),...I(2),onClick:Z})]})}),(0,a.jsx)(O,{component:x.default,value:e,index:0,dir:J.direction,children:(0,a.jsx)(x.default,{sx:{width:"100%",height:770},children:(0,a.jsx)(u.z,{rows:D,columns:v,pageSizeOptions:[5,12,20],getRowId:e=>e.ARTICULO,onRowClick:e=>{M(e.row)},initialState:{pagination:{paginationModel:{page:0,pageSize:12}}},sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})}),(0,a.jsx)(O,{component:x.default,value:e,index:1,dir:J.direction,children:!0===P?(0,a.jsx)(x.default,{sx:{width:"100%"},children:(0,a.jsx)(j.A,{})}):r.length<=0?(0,a.jsx)("h2",{children:"NO HAY PEDIDOS"}):(0,a.jsx)(x.default,{sx:{width:"100%",height:770},children:(0,a.jsx)(u.z,{rows:r,columns:R,initialState:{pagination:{paginationModel:{page:0,pageSize:12}}},pageSizeOptions:[5,12,20],getRowId:e=>e.PEDIDO,sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})}),(0,a.jsx)(O,{component:x.default,value:e,index:2,dir:J.direction,children:!0===P?(0,a.jsx)(x.default,{sx:{width:"100%"},children:(0,a.jsx)(j.A,{})}):i.length<=0?(0,a.jsx)("h2",{children:"NO HAY FACTURAS"}):(0,a.jsx)(x.default,{sx:{width:"100%",height:770},children:(0,a.jsx)(u.z,{rows:i,columns:y,initialState:{pagination:{paginationModel:{page:0,pageSize:12}}},pageSizeOptions:[5,12,20],getRowId:e=>e.FACTURA,sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})})]})})]})]})}},8889:(e,t,r)=>{"use strict";r.d(t,{c:()=>a,m:()=>o});let a={url:"http://172.20.20.3:8001"},o={url:"http://192.168.1.3:3010/api"}},70689:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>s});var a=r(95155),o=r(12115),l=r(76046),i=r(89208);let n=(0,o.createContext)({login:e=>{},logout:()=>{}}),s=e=>{let{children:t}=e,r=(0,l.useRouter)(),[s]=(0,o.useState)(!0),[d,c]=(0,o.useState)(null),[u,h]=(0,o.useState)({}),[m,p]=(0,o.useState)({}),[x,f]=(0,o.useState)({}),A=(0,o.useCallback)(function(e){i.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),c(e)},[]),S=(0,o.useCallback)(function(){r.push("/"),i.A.remove("authTokens"),localStorage.removeItem("auth"),c(null)},[]);(0,o.useEffect)(()=>{let e=localStorage.getItem("auth")||i.A.get("authTokens"),t=localStorage.getItem("pedido"),r=localStorage.getItem("caja"),a=localStorage.getItem("cliente");a&&h(JSON.parse(a)),t&&p(JSON.parse(t)),r&&f(JSON.parse(r)),e&&c(JSON.parse(e))},[]);let g=(0,o.useMemo)(()=>({auth:d,cliente:u,setCliente:h,pedido:m,setPedido:p,caja:x,setCaja:f,loading:s,login:A,logout:S}),[d,u,m,x,A,S]);return(0,a.jsx)(n.Provider,{value:g,children:t})},d=()=>(0,o.useContext)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[339,8320,3524,9754,1083,1260,6403,152,8173,2670,7493,1669,1014,9477,8441,1517,7358],()=>t(63913)),_N_E=e.O()}]);